# 校内机器人联赛 上位机组技术考核文档

<p align="right">version 1.0.0</p>

## 1. CV框架组

### 1.1 开发环境

#### 1.1.1 硬件环境

香橙派开发板(Orange Pi 5)，网络摄像头

#### 1.1.2 软件环境

Ubuntu20.04，Opencv3.4，ROS2 foxy

### 1.2 代码规范s

#### 1.2.1总体要求

  使用正确的c++语法，代码整洁、易读，分行分段，注意缩进，重要位置写明注释。

#### 1.2.2命名

- 文件名、函数名、变量名等均不要使用汉语拼音，使用英文单词+下划线+数字的组合方式。

- 文件和函数命名要准确表达命名对象的含义或用途。

	💡	错误示例：nihao.cpp，void aa(int a,int b); 

	💡	正确示例：HelloWorld.cpp ，void find_circle(int a,int b);

#### 1.2.3设计

    多使用结构体(struct)、类(class)和指针，针对特定功能多写函数，避免主函数main过于臃肿。 

#### 1.2.4注释

    特殊功能或含义的函数、变量要注明其功能，注释不嫌多。

#### 1.2.5总结

    代码不仅要有用，也要让别人能看得懂！

### 1.3技术指标

#### 1.3.1总体任务

    完成整体工作空间构建，代码内容正确且完整，在代码完成的前提下检验代码效果。

#### 1.3.2具体要点

1. 搭建ROS2框架，功能包和节点设计有序且合理。
2. 可以正确打开相机并调试相机参数。
3. 在ROS2中调用opencv库，并正确调用相关函数。
4. 根据自己调用的库正确改写Cmakelists文件。
5. 能通过对图像进行处理提取图像特征，并进行匹配识别。
6. 识别结果可以及时反馈，并能处理如识别失败或相机漏帧等特殊情况。
7. 可以与下位机进行通信，并正确控制下位机行动。

### 1.4 验收标准

验收以代码审查为主要方式

1. 代码是否符合规范，是否具备良好的可读性。
2. 是否完成技术要点。
3. 是否有清晰的cv思路(图像获取，图像处理，数据分析，匹配识别)。
4.  代码是否具有时效性。

## 2. 深度学习组

### 2.1 开发环境
#### 2.1.1 硬件环境

Nvidia TX2，网络摄像头

#### 2.1.2 软件环境

Ubuntu20.04，Opencv3.4，ROS2 foxy，python3.6，cuda 


### 2.2 代码规范
#### 2.2.1 总体要求
   训练模型部分能够正确使用python语法，模型部署部分能够正确使用c++语法，代码整洁、易读，分行分段，注意缩进，重要位置写明注释。


#### 2.2.2命名
- 文件名、函数名、变量名等均不要使用汉语拼音，使用英文单词+下划线+数字的组合方式。
- 文件和函数命名要准确表达命名对象的含义或用途。

	💡	错误示例: nihao.py nihao.cpp
#### 2.2.3 设计
对于python程序，尽量使用类(class)，针对特定功能多写函数。
对于cpp程序，多使用结构体(struct)、类(class)和指针，针对特定功能多写函数，避免主函数main过于臃肿。
#### 2.2.4注释
特殊功能或含义的函数、变量要注明其功能,注释不嫌多。

#### 2.2.5 总结
代码不仅要有用，也要让自己和别人能看得懂！


### 2.3 技术指标
#### 2.3.1 总体任务
完成整体工作空间构建，代码内容正确且完整，在代码完成的前提下检验代码效果。
#### 2.3.2 具体要点

1. 在ROS2框架下创建用于模型部署的功能包、节点。
2. 对于训练部分，能够大致知道每个模块的功能；对于推理部分，能够调用trt库,并正确推理识别。
3. 获取从相机中的输入。
4. 根据自己调用的库正确改写Cmakelists文件。
5. 能通过模型推理识别物体。
6. 识别结果可以及时反馈给下位机，同时能够输出识别结果。
7. 与下位机进行通信，并正确控制下位机行动。

### 2.4 验收标准

验收以代码审查为主要方式，按照技术要点进行验收。

## 3. 导航SLAM组

### 3.1 开发环境

#### 3.1.1硬件环境

香橙派开发板(Orange Pi 5)，单线激光雷达

#### 3.1.2 软件环境

Ubuntu20.04，ROS2 foxy

功能包：navigation2，gmapping/cartographer二选一，amcl，雷达驱动的功能包

### 3.2 代码规范

功能包的调用一定要清晰，涉及到的功能包都要放在一个工作空间内，通过不同的launch文件启动不同的功能，文件夹命名要求清晰明确，不要使用汉语拼音，使用英文单词+下划线+数字的组合方式命名，让自己和他人都能看懂。

### 3.3 技术指标

#### 3.3.1 总体任务

完成导航整体架构的构建，以能够实现目标要求为准，建图效果和导航避障效果在功能正常的前提下再进行考核；

#### 3.3.2具体要点

1. 配置雷达驱动的功能包，启动雷达节点。
2. 使用二维的建图算法完成二维地图的构建。
3. 搭建navigation2的框架。
4. 使用amcl或者cartographer重定位算法做重定位。
5. 通过在rviz2中给目标点的方式使小车向目标方向移动，小车开始运动到到达第一次给的目标点的期间不得进行人为干预，使小车完成该次运动，且不发生碰撞。
6. 可以与下位机进行通信，并正确控制下位机行动。

### 3.4 验收标准

按照技术要求六个具体要点进行验收，前四点作为主要的验收标准。

如果在运动中发生碰撞，但小车在空旷的场地可以进行预期的移动，也可以视作基本完成后两两点的要求。

 

 

 
